# ЛР4 — Создание индексных страниц и пагинация

**Автор:** Бизюк Андрей

**Дата выполнения:** 18 января 2026

## Цель
Научиться выводить данные из БД на страницы приложения, реализовать пагинацию и фильтрацию, использовать связи между моделями и стилизовать интерфейс с Tailwind CSS.

## Краткое содержание выполненной работы
- Создана страница списка постов с пагинацией и фильтрацией по категориям.
- Реализована сортировка (Новые / Популярные) и переключатель режима поиска: "Начинается с" / "Содержит".
- Поиск по заголовку выполнен регистронезависимым (Unicode) через `LOWER(title)` + `mb_strtolower` и поддерживает префиксный и содержащий режимы.
- Отображаются связанные данные: категория, теги, количество комментариев (через `with()` и `withCount`).
- Добавлена логика бесконечной прокрутки (AJAX) для подгрузки страниц.
- В сайдбаре реализована статистика: общее число постов, комментариев и популярный тег.

## Реализованные требования (чеклист)
- Создать страницу со списком постов: **Выполнено** — `resources/views/posts/index.blade.php`.
- Реализовать пагинацию и сортировку: **Выполнено** — `PostController@index` использует `paginate(10)` и `sort`.
- Отображать связанные данные (категории, теги, комментарии): **Выполнено** — `with(['category','tags','comments'])` и `posts._cards`.
- Стилизовать интерфейс с Tailwind CSS: **Выполнено** — шаблоны используют grid/md/lg-сетки и Tailwind-классы.
- Фильтрация по категориям: **Выполнено** — `select name="category"` и `where('category_id', $category)`.
- Поиск по заголовкам (содержит/начинается с) и регистронезависимость: **Выполнено** — добавлен `mode` и `LOWER(title) LIKE ?`.
- Бесконечная прокрутка (AJAX): **Выполнено** — частичный рендер `posts._cards` при AJAX и JS для подгрузки.

## Основные файлы (реализация)
- Контроллер: [my-personal-blog/app/Http/Controllers/PostController.php](my-personal-blog/app/Http/Controllers/PostController.php)
- Маршруты: [my-personal-blog/routes/web.php](my-personal-blog/routes/web.php)
- Список постов (шаблон): [my-personal-blog/resources/views/posts/index.blade.php](my-personal-blog/resources/views/posts/index.blade.php)
- Карточки постов (частичный): [my-personal-blog/resources/views/posts/_cards.blade.php](my-personal-blog/resources/views/posts/_cards.blade.php)
- Стили и ассеты: `resources/css/app.css`, `resources/js/app.tsx` (Vite/Tailwind)

## Проверки и команды
1. Сборка фронтенда (опционально):

```
npm install
npm run build
```

2. Запуск dev‑сервера Laravel для визуальной проверки:

```
php artisan serve --host=127.0.0.1 --port=8000
```

3. Быстрая проверка в базе (sqlite) — примеры запросов, которые выполнялись локально:

```
sqlite3 database/database.sqlite "SELECT COUNT(*) FROM posts WHERE LOWER(title) LIKE 'e%';"
sqlite3 database/database.sqlite "SELECT COUNT(*) FROM posts WHERE LOWER(title) LIKE '%voluptatum%';"
```

## Замечания и рекомендации
- Регистронезависимость Unicode: текущее решение (`LOWER(title)` + `mb_strtolower`) работает для большинства сценариев, но для полноценной поддержки Unicode рекомендуется использовать расширение ICU для SQLite или FTS5 с нормализацией.
- Тесты: добавить feature‑tests (PHPUnit) для проверки поиска (prefix/contains), фильтрации и сортировки.
- UX: добавить подсказку рядом с переключателем поиска (mode) и, при желании, радиокнопки вместо селекта.

## Вывод
Все пункты лабораторной работы 4 выполнены и протестированы локально: страница списка постов, пагинация, фильтры, поиск с режимами, отображение связанных данных, бесконечная прокрутка и стилизация Tailwind.

---
Файлы отчёта и реализация находятся в каталоге `my-personal-blog` репозитория.
